{"version":3,"file":"form.min.js","sources":["../src/form.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/notification'], function($, Ajax, Notification) {\n    return {\n        init: function() {\n\n            const messageBox = $('#myblock-message');\n            const responseBox = $('#myblock-response');\n            const listContainer = $('#myblock-list');\n\n            function loadMessages() {\n                Ajax.call([{\n                    methodname: 'block_myblock_get_messages',\n                    args: {},\n                    done: function(messages) {\n                        let html = '<ul>';\n                        messages.forEach(msg => {\n                            html += `<li>${msg.timecreated}: ${msg.message}</li>`;\n                        });\n                        html += '</ul>';\n                        listContainer.html(html);\n                    },\n                    fail: Notification.exception\n                }]);\n            }\n\n            $('#myblock-submit').on('click', function() {\n                const message = messageBox.val().trim();\n\n                if (!message) {\n                    alert(\"Please enter a message.\");\n                    return;\n                }\n\n                Ajax.call([{\n                    methodname: 'block_myblock_save_message',\n                    args: { message: message },\n                    done: function(response) {\n                        responseBox.text(response.status);\n                        messageBox.val('');\n                        loadMessages(); // refresh list\n                    },\n                    fail: Notification.exception\n                }]);\n            });\n\n            loadMessages(); // initial load\n        }\n    };\n});\n"],"names":["define","$","Ajax","Notification","init","messageBox","responseBox","listContainer","loadMessages","call","methodname","args","done","messages","html","forEach","msg","timecreated","message","fail","exception","on","val","trim","response","text","status","alert"],"mappings":"AAAAA,4BAAO,CAAC,SAAU,YAAa,sBAAsB,SAASC,EAAGC,KAAMC,oBAC5D,CACHC,KAAM,iBAEIC,WAAaJ,EAAE,oBACfK,YAAcL,EAAE,qBAChBM,cAAgBN,EAAE,0BAEfO,eACLN,KAAKO,KAAK,CAAC,CACPC,WAAY,6BACZC,KAAM,GACNC,KAAM,SAASC,cACPC,KAAO,OACXD,SAASE,SAAQC,MACbF,oBAAeE,IAAIC,yBAAgBD,IAAIE,oBAE3CJ,MAAQ,QACRP,cAAcO,KAAKA,OAEvBK,KAAMhB,aAAaiB,aAI3BnB,EAAE,mBAAmBoB,GAAG,SAAS,iBACvBH,QAAUb,WAAWiB,MAAMC,OAE5BL,QAKLhB,KAAKO,KAAK,CAAC,CACPC,WAAY,6BACZC,KAAM,CAAEO,QAASA,SACjBN,KAAM,SAASY,UACXlB,YAAYmB,KAAKD,SAASE,QAC1BrB,WAAWiB,IAAI,IACfd,gBAEJW,KAAMhB,aAAaiB,aAZnBO,MAAM,8BAgBdnB"}